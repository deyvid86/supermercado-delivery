<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Delivery Supermercado</title>
  <style>
    /* estilos mantidos aqui */
  </style>
</head>
<body>
  <header>
    <h1>Supermercado Delivery</h1>
    <input type="text" id="busca" placeholder="Buscar produto..." />
    <button id="botao-carrinho" title="Ver carrinho">
      ðŸ›’ <span id="badge-carrinho">0</span>
    </button>
  </header>
  <nav id="categorias"></nav>
  <main>
    <section id="filtros">
      <select id="filtro-categoria">
        <option value="Todas">Todas as categorias</option>
      </select>
    </section>
    <section id="produtos"></section>
    <aside id="carrinho-container" tabindex="0" aria-label="Carrinho de compras">
      <h2>
        Carrinho
        <button id="fechar-carrinho" aria-label="Fechar carrinho">Ã—</button>
      </h2>
      <div id="itens-carrinho"></div>
      <div id="total">Total: R$ 0.00</div>
      <button id="limpar-carrinho">Limpar carrinho</button>
      <form id="form-pedido" onsubmit="return false;">
        <input type="text" id="nome" placeholder="Seu nome" required />
        <input type="text" id="endereco" placeholder="EndereÃ§o para entrega" required />
        <select id="pagamento" onchange="mostrarTroco()" required>
          <option value="" disabled selected>Forma de pagamento</option>
          <option value="pix">PIX</option>
          <option value="cartao">CartÃ£o</option>
          <option value="dinheiro">Dinheiro</option>
        </select>
        <div id="troco-container">
          <input type="number" id="troco" placeholder="Troco para quanto?" min="0" step="0.01" />
        </div>
        <div class="form-buttons">
          <button type="button" id="btn-whatsapp" onclick="enviarWhatsApp()">Enviar pedido pelo WhatsApp</button>
        </div>
      </form>
    </aside>
  </main>
  <script>
    // Produtos
    const produtos = [
      { id: 1, nome: "Arroz 5kg", preco: 20.99, categoria: "GrÃ£os", imagem: "https://cdn-icons-png.flaticon.com/512/2913/2913461.png" },
      { id: 2, nome: "FeijÃ£o Carioca 1kg", preco: 7.50, categoria: "GrÃ£os", imagem: "https://cdn-icons-png.flaticon.com/512/4339/4339002.png" },
      { id: 3, nome: "Leite Integral 1L", preco: 4.89, categoria: "LaticÃ­nios", imagem: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
      { id: 4, nome: "PÃ£o FrancÃªs (unidade)", preco: 0.80, categoria: "Padaria", imagem: "https://cdn-icons-png.flaticon.com/512/2746/2746564.png" },
      { id: 5, nome: "Banana Nanica (kg)", preco: 5.50, categoria: "Frutas", imagem: "https://cdn-icons-png.flaticon.com/512/415/415733.png" },
      { id: 6, nome: "Tomate (kg)", preco: 6.00, categoria: "Legumes", imagem: "https://cdn-icons-png.flaticon.com/512/2913/2913713.png" },
      { id: 7, nome: "Detergente LÃ­quido 500ml", preco: 3.99, categoria: "Limpeza", imagem: "https://cdn-icons-png.flaticon.com/512/1246/1246489.png" },
      { id: 8, nome: "Sabonete 90g", preco: 1.50, categoria: "Higiene", imagem: "https://cdn-icons-png.flaticon.com/512/2913/2913706.png" },
      { id: 9, nome: "CafÃ© Torrado 500g", preco: 15.00, categoria: "Bebidas", imagem: "https://cdn-icons-png.flaticon.com/512/2731/2731535.png" }
    ];

    const filtroCategoria = document.getElementById('filtro-categoria');
    const buscaInput = document.getElementById('busca');

    function atualizarFiltroCategorias() {
      const categorias = [...new Set(produtos.map(p => p.categoria))];
      categorias.forEach(cat => {
        const option = document.createElement('option');
        option.value = cat;
        option.textContent = cat;
        filtroCategoria.appendChild(option);
      });
    }

    filtroCategoria.addEventListener('change', () => {
      filtrarProdutos();
    });

    buscaInput.addEventListener('input', () => {
      filtrarProdutos();
    });

    function filtrarProdutos() {
      const termo = buscaInput.value.toLowerCase();
      const categoriaSelecionada = filtroCategoria.value;
      const listaFiltrada = produtos.filter(p => {
        const correspondeBusca = p.nome.toLowerCase().includes(termo);
        const correspondeCategoria = categoriaSelecionada === "Todas" || p.categoria === categoriaSelecionada;
        return correspondeBusca && correspondeCategoria;
      });
      mostrarProdutos(listaFiltrada);
    }

    atualizarFiltroCategorias();
    mostrarProdutos(produtos);
  </script>
</body>
</html>
