<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Supermercado Delivery</title>
  <!-- Font Awesome para √≠cones -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: auto;
      background-color: #f9f9f9;
    }
    .categoria-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    .categoria-bar button {
      padding: 10px 15px;
      border: none;
      background-color: #ddd;
      cursor: pointer;
      border-radius: 5px;
    }
    .categoria-bar button.ativa {
      background-color: #28a745;
      color: white;
      font-weight: bold;
    }
    .search-bar {
      margin-bottom: 20px;
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .product {
      border: 1px solid #ccc;
      background-color: white;
      padding: 10px;
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
      align-items: center;
      border-radius: 5px;
    }
    .product img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 5px;
    }
    .product-info {
      flex: 1;
    }
    input, select {
      padding: 10px;
      margin-top: 10px;
      width: 100%;
      box-sizing: border-box;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px;
      background-color: #28a745;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    button:hover {
      background-color: #218838;
    }
    .remover-btn {
      background-color: #dc3545;
      margin-left: 10px;
      font-size: 12px;
    }
    .remover-btn:hover {
      background-color: #c82333;
    }
    .clear-cart {
      background-color: #6c757d;
      margin-top: 10px;
    }
    .clear-cart:hover {
      background-color: #5a6268;
    }
    .quantidade-btn {
      background-color: #007bff;
      color: white;
      padding: 6px 10px;
      margin: 0 5px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
    }
    .quantidade-btn:hover {
      background-color: #0056b3;
    }
    .cart, .checkout {
      margin-top: 30px;
    }
    #troco-container {
      display: none;
    }
  </style>
</head>
<body>

  <h1>Supermercado Delivery</h1>

  <input type="text" id="search" class="search-bar" placeholder="üîç Buscar produto..." onkeyup="renderizarProdutos()" />

  <div class="categoria-bar" id="categoria-bar"></div>

  <div id="product-list"></div>

  <div class="cart">
    <h2>üõí Carrinho</h2>
    <ul id="cart-items"></ul>
    <p><strong>Total: R$ <span id="total">0.00</span></strong></p>
    <button class="clear-cart" onclick="limparCarrinho()"><i class="fas fa-trash"></i> Remover tudo</button>
  </div>

  <div class="checkout">
    <h3>üìç Endere√ßo de entrega</h3>
    <input type="text" id="endereco" placeholder="Digite seu endere√ßo completo" />

    <h3>üí≥ Forma de pagamento</h3>
    <select id="forma-pagamento" onchange="verificarPagamento()">
      <option value="Pix">Pix</option>
      <option value="Cart√£o">Cart√£o</option>
      <option value="Dinheiro">Dinheiro</option>
    </select>

    <div id="troco-container">
      <h4>üíµ Troco para quanto?</h4>
      <input type="text" id="troco" placeholder="Ex: 100.00" />
    </div>

    <br />
    <button onclick="finalizarPedido()"><i class="fab fa-whatsapp"></i> Finalizar Pedido no WhatsApp</button>
  </div>

  <script>
    const produtos = [
      { nome: "Arroz 5kg", preco: 25, categoria: "Alimentos", imagem: "https://i.imgur.com/VXU0NoD.jpg" },
      { nome: "Feij√£o 1kg", preco: 7, categoria: "Alimentos", imagem: "https://i.imgur.com/ANlt36T.jpg" },
      { nome: "Macarr√£o", preco: 5, categoria: "Alimentos", imagem: "https://i.imgur.com/pVo3mPw.jpg" },
      { nome: "√ìleo", preco: 6, categoria: "Alimentos", imagem: "https://i.imgur.com/tQdI5Iw.jpg" },
      { nome: "Detergente", preco: 3, categoria: "Limpeza", imagem: "https://i.imgur.com/MJJk0e4.jpg" },
      { nome: "Sab√£o em p√≥", preco: 10, categoria: "Limpeza", imagem: "https://i.imgur.com/tk7RtUw.jpg" }
    ];

    const carrinho = [];
    let categoriaSelecionada = "Todas";

    function gerarCategorias() {
      const categorias = ["Todas", ...new Set(produtos.map(p => p.categoria))];
      const barra = document.getElementById("categoria-bar");
      barra.innerHTML = "";
      categorias.forEach(cat => {
        const btn = document.createElement("button");
        btn.textContent = cat;
        if (cat === categoriaSelecionada) btn.classList.add("ativa");
        btn.onclick = () => {
          categoriaSelecionada = cat;
          renderizarProdutos();
          gerarCategorias();
        };
        barra.appendChild(btn);
      });
    }

    function renderizarProdutos() {
      const lista = document.getElementById("product-list");
      const busca = document.getElementById("search").value.toLowerCase();
      lista.innerHTML = "";

      const filtrados = produtos.filter(p => {
        const correspondeCategoria = categoriaSelecionada === "Todas" || p.categoria === categoriaSelecionada;
        const correspondeBusca = p.nome.toLowerCase().includes(busca);
        return correspondeCategoria && correspondeBusca;
      });

      filtrados.forEach(produto => {
        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
          <img src="${produto.imagem}" alt="${produto.nome}" />
          <div class="product-info">
            <strong>${produto.nome}</strong><br/>
            Pre√ßo: R$ ${produto.preco.toFixed(2)}<br/>
            <input type="number" id="qtd-${produto.nome}" value="1" min="1" />
            <button onclick="adicionarAoCarrinho('${produto.nome}')">
              <i class="fas fa-cart-plus"></i> Adicionar
            </button>
          </div>
        `;
        lista.appendChild(div);
      });
    }

    function adicionarAoCarrinho(nome) {
      const produto = produtos.find(p => p.nome === nome);
      const qtd = parseInt(document.getElementById(`qtd-${nome}`).value);
      if (qtd < 1) return;

      const existente = carrinho.find(item => item.nome === nome);
      if (existente) {
        existente.quantidade += qtd;
      } else {
        carrinho.push({ ...produto, quantidade: qtd });
      }
      atualizarCarrinho();
    }

    function atualizarCarrinho() {
      const listaCarrinho = document.getElementById("cart-items");
      listaCarrinho.innerHTML = "";
      let total = 0;

      carrinho.forEach((item, index) => {
        const li = document.createElement("li");
        li.innerHTML = `
          ${item.nome} - R$ ${(item.preco * item.quantidade).toFixed(2)}
          <div>
            <button class="quantidade-btn" onclick="alterarQuantidade(${index}, -1)">
              <i class="fas fa-minus"></i>
            </button>
            ${item.quantidade}
            <button class="quantidade-btn" onclick="alterarQuantidade(${index}, 1)">
              <i class="fas fa-plus"></i>
            </button>
            <button class="remover-btn" onclick="removerDoCarrinho(${index})">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        `;
        listaCarrinho.appendChild(li);
        total += item.preco * item.quantidade;
      });

      document.getElementById("total").textContent = total.toFixed(2);
    }

    function alterarQuantidade(index, delta) {
      if (carrinho[index].quantidade + delta >= 1) {
        carrinho[index].quantidade += delta;
        atualizarCarrinho();
      }
    }

    function removerDoCarrinho(index) {
      carrinho.splice(index, 1);
      atualizarCarrinho();
    }

    function limparCarrinho() {
      carrinho.length = 0;
      atualizarCarrinho();
    }

    function verificarPagamento() {
      const forma = document.getElementById("forma-pagamento").value;
      document.getElementById("troco-container").style.display = forma === "Dinheiro" ? "block" : "none";
    }

    function finalizarPedido() {
      const endereco = document.getElementById("endereco").value.trim();
      const formaPagamento = document.getElementById("forma-pagamento").value;
      const troco = document.getElementById("troco").value.trim();

      if (!endereco) return alert("Por favor, informe o endere√ßo.");
      if (carrinho.length === 0) return alert("O carrinho est√° vazio.");

      let mensagem = "*Novo pedido:*\n\n";
      carrinho.forEach(item => {
        mensagem += `${item.quantidade}x ${item.nome} - R$ ${(item.preco * item.quantidade).toFixed(2)}\n`;
      });

      const total = carrinho.reduce((soma, item) => soma + item.preco * item.quantidade, 0);
      mensagem += `\n*Total:* R$ ${total.toFixed(2)}\n`;
      mensagem += `*Endere√ßo:* ${endereco}\n`;
      mensagem += `*Pagamento:* ${formaPagamento}\n`;

      if (formaPagamento === "Dinheiro" && troco) {
        mensagem += `*Troco para:* R$ ${troco}`;
      }

      const numero = "SEU_NUMERO_AQUI";
      const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;
      window.open(url, "_blank");
    }

    gerarCategorias();
    renderizarProdutos();
  </script>
</body>
</html>
