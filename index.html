<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Delivery de Supermercado</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; padding: 0;
      background: #f4f4f4;
      color: #333;
    }
    header {
      background: #2c3e50;
      padding: 10px 20px;
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    #categorias {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    #categorias button {
      background: #34495e;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 30px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: background-color 0.3s ease;
    }
    #categorias button.active,
    #categorias button:hover {
      background: #1abc9c;
    }
    #busca {
      padding: 8px 12px;
      border-radius: 30px;
      border: none;
      width: 200px;
      font-size: 14px;
    }
    main {
      display: flex;
      padding: 20px;
      gap: 20px;
    }
    #produtos-container {
      flex: 3;
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
      gap: 20px;
    }
    .produto-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: transform 0.2s ease;
    }
    .produto-card:hover {
      transform: translateY(-5px);
    }
    .produto-card img {
      max-width: 100%;
      max-height: 120px;
      object-fit: contain;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    .produto-card h3 {
      font-size: 16px;
      margin: 5px 0;
      text-align: center;
    }
    .produto-card p {
      font-weight: bold;
      margin: 5px 0 10px 0;
      color: #27ae60;
      font-size: 15px;
    }
    .produto-card button {
      background: #1abc9c;
      border: none;
      color: white;
      padding: 8px 14px;
      border-radius: 30px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: background-color 0.3s ease;
    }
    .produto-card button:hover {
      background: #16a085;
    }
    #carrinho-container {
      flex: 1;
      background: white;
      border-radius: 10px;
      padding: 20px;
      max-width: 320px;
      display: none;
      flex-direction: column;
      position: sticky;
      top: 70px;
      height: calc(100vh - 80px);
      overflow-y: auto;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    #carrinho-container h2 {
      margin-top: 0;
      margin-bottom: 15px;
      text-align: center;
      color: #2c3e50;
    }
    .item-carrinho {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 10px;
    }
    .item-carrinho .info {
      flex: 1;
    }
    .item-carrinho .nome {
      font-weight: bold;
    }
    .item-carrinho .quantidade {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 6px;
    }
    .item-carrinho .quantidade button {
      background: #2980b9;
      border: none;
      color: white;
      border-radius: 4px;
      padding: 4px 8px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }
    .item-carrinho .quantidade button:hover {
      background: #1f618d;
    }
    .item-carrinho .remover-btn {
      background: #e74c3c;
      border: none;
      color: white;
      border-radius: 4px;
      padding: 6px 10px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s ease;
      margin-left: 10px;
    }
    .item-carrinho .remover-btn:hover {
      background: #c0392b;
    }
    #total {
      font-weight: bold;
      font-size: 18px;
      margin-top: 15px;
      text-align: right;
      color: #27ae60;
    }
    #btn-remover-tudo {
      background: #e74c3c;
      color: white;
      border: none;
      border-radius: 30px;
      padding: 10px 16px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 10px;
      transition: background-color 0.3s ease;
    }
    #btn-remover-tudo:hover {
      background: #c0392b;
    }
    form {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    label {
      font-weight: 600;
    }
    input, select {
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    #troco-container {
      display: none;
    }
    #btn-enviar {
      background: #27ae60;
      color: white;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 30px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
    }
    #btn-enviar:hover {
      background: #1e8449;
    }
    #botao-carrinho {
      background: transparent;
      border: none;
      color: white;
      font-size: 26px;
      cursor: pointer;
      position: relative;
    }
    #botao-carrinho .badge {
      position: absolute;
      top: -6px;
      right: -10px;
      background: #e74c3c;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 12px;
      font-weight: bold;
    }
    /* √çcones inline */
    .icon-cart::before { content: "üõí"; }
    .icon-plus::before { content: "+"; }
    .icon-minus::before { content: "‚àí"; }
    .icon-trash::before { content: "üóëÔ∏è"; }
    .icon-send::before { content: "üì≤"; }
  </style>
</head>
<body>
  <header>
    <div id="categorias"></div>
    <input type="text" id="busca" placeholder="Buscar produto..." />
    <button id="botao-carrinho" aria-label="Abrir carrinho">
      <span class="icon-cart"></span>
      <span class="badge" id="badge-count">0</span>
    </button>
  </header>
  <main>
    <section id="produtos-container"></section>
    <aside id="carrinho-container" aria-label="Carrinho de compras">
      <h2>Seu Carrinho</h2>
      <div id="itens-carrinho"></div>
      <div id="total">Total: R$ 0.00</div>
      <button id="btn-remover-tudo" title="Remover todos os itens do carrinho">
        <span class="icon-trash"></span> Limpar Carrinho
      </button>
      <form id="form-pedido">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" placeholder="Seu nome" required />
        <label for="endereco">Endere√ßo de entrega:</label>
        <input type="text" id="endereco" placeholder="Rua, n√∫mero, bairro..." required />
        <label for="pagamento">Forma de pagamento:</label>
        <select id="pagamento" required>
          <option value="" disabled selected>Selecione a forma de pagamento</option>
          <option value="pix">Pix</option>
          <option value="cartao">Cart√£o</option>
          <option value="dinheiro">Dinheiro</option>
        </select>
        <div id="troco-container">
          <label for="troco">Troco para quanto?</label>
          <input type="number" id="troco" min="0" step="0.01" placeholder="Ex: 50.00" />
        </div>
        <button type="button" id="btn-enviar" title="Enviar pedido pelo WhatsApp">
          <span class="icon-send"></span> Enviar pedido pelo WhatsApp
        </button>
      </form>
    </aside>
  </main>

  <script>
    const produtos = [
      { id: 1, nome: "Macarr√£o", preco: 5.0, categoria: "Massas", imagem: "https://cdn-icons-png.flaticon.com/512/1046/1046784.png" },
      { id: 2, nome: "Arroz", preco: 10.0, categoria: "Gr√£os", imagem: "https://cdn-icons-png.flaticon.com/512/1046/1046790.png" },
      { id: 3, nome: "Feij√£o", preco: 7.5, categoria: "Gr√£os", imagem: "https://cdn-icons-png.flaticon.com/512/1046/1046791.png" },
      { id: 4, nome: "Tomate", preco: 3.0, categoria: "Hortifruti", imagem: "https://cdn-icons-png.flaticon.com/512/415/415682.png" },
      { id: 5, nome: "Leite", preco: 4.5, categoria: "Latic√≠nios", imagem: "https://cdn-icons-png.flaticon.com/512/1046/1046796.png" },
      { id: 6, nome: "Queijo", preco: 12.0, categoria: "Latic√≠nios", imagem: "https://cdn-icons-png.flaticon.com/512/1046/1046794.png" },
    ];

    let carrinho = [];

    function renderizarCategorias() {
      const categoriasUnicas = ["Todos", ...new Set(produtos.map(p => p.categoria))];
      const container = document.getElementById("categorias");
      container.innerHTML = "";
      categoriasUnicas.forEach(cat => {
        const btn = document.createElement("button");
        btn.textContent = cat;
        btn.onclick = () => {
          document.querySelectorAll("#categorias button").forEach(b => b.classList.remove("active"));
          btn.classList.add("active");
          renderizarProdutos(cat === "Todos" ? null : cat);
        };
        if (cat === "Todos") btn.classList.add("active");
        container.appendChild(btn);
      });
    }

    function renderizarProdutos(categoria = null) {
      const container = document.getElementById("produtos-container");
      const busca = document.getElementById("busca").value.toLowerCase();
      container.innerHTML = "";
      produtos
        .filter(p => (!categoria || p.categoria === categoria))
        .filter(p => p.nome.toLowerCase().includes(busca))
        .forEach(p => {
          const card = document.createElement("div");
          card.className = "produto-card";
          card.innerHTML = `
            <img src="${p.imagem}" alt="${p.nome}" />
            <h3>${p.nome}</h3>
            <p>R$ ${p.preco.toFixed(2)}</p>
            <button class="btn-add" aria-label="Adicionar ${p.nome} ao carrinho">
              <span class="icon-cart"></span> Adicionar
            </button>
          `;
          card.querySelector("button").onclick = () => adicionarAoCarrinho(p.id);
          container.appendChild(card);
        });
    }

    function adicionarAoCarrinho(id) {
      const produto = produtos.find(p => p.id === id);
      const item = carrinho.find(i => i.id === id);
      if (item) {
        item.quantidade++;
      } else {
        carrinho.push({ ...produto, quantidade: 1 });
      }
      atualizarBadge();
      renderizarCarrinho();
    }

    function renderizarCarrinho() {
      const container = document.getElementById("itens-carrinho");
      container.innerHTML = "";
      carrinho.forEach(item => {
        const div = document.createElement("div");
        div.className = "item-carrinho";
        div.innerHTML = `
          <div class="info">
            <div class="nome">${item.nome}</div>
            <div class="quantidade">
              <button class="btn-quantidade btn-minus" aria-label="Diminuir quantidade de ${item.nome}">‚àí</button>
              <span>${item.quantidade}</span>
              <button class="btn-quantidade btn-plus" aria-label="Aumentar quantidade de ${item.nome}">+</button>
            </div>
            <div>R$ ${(item.preco * item.quantidade).toFixed(2)}</div>
          </div>
          <button class="remover-btn" aria-label="Remover ${item.nome} do carrinho">
            <span class="icon-trash"></span>
          </button>
        `;
        // Bot√µes de quantidade
        div.querySelector(".btn-minus").onclick = () => {
          if (item.quantidade > 1) {
            item.quantidade--;
          } else {
            carrinho = carrinho.filter(i => i.id !== item.id);
          }
          atualizarBadge();
          renderizarCarrinho();
        };
        div.querySelector(".btn-plus").onclick = () => {
          item.quantidade++;
          atualizarBadge();
          renderizarCarrinho();
        };
        // Bot√£o remover item
        div.querySelector(".remover-btn").onclick = () => {
          carrinho = carrinho.filter(i => i.id !== item.id);
          atualizarBadge();
          renderizarCarrinho();
        };
        container.appendChild(div);
      });

      // Atualizar total
      const total = carrinho.reduce((acc, item) => acc + item.preco * item.quantidade, 0);
      document.getElementById("total").textContent = `Total: R$ ${total.toFixed(2)}`;
    }

    function atualizarBadge() {
      const badge = document.getElementById("badge-count");
      const totalItens = carrinho.reduce((acc, item) => acc + item.quantidade, 0);
      badge.textContent = totalItens;
    }

    document.getElementById("pagamento").addEventListener("change", () => {
      const trocoContainer = document.getElementById("troco-container");
      if (document.getElementById("pagamento").value === "dinheiro") {
        trocoContainer.style.display = "block";
      } else {
        trocoContainer.style.display = "none";
        document.getElementById("troco").value = "";
      }
    });

    document.getElementById("btn-remover-tudo").onclick = () => {
      carrinho = [];
      atualizarBadge();
      renderizarCarrinho();
    };

    document.getElementById("btn-enviar").onclick = () => {
      enviarWhatsApp();
    };

    function enviarWhatsApp() {
      if (carrinho.length === 0) {
        alert("Seu carrinho est√° vazio!");
        return;
      }
      const nome = document.getElementById("nome").value.trim();
      const endereco = document.getElementById("endereco").value.trim();
      const pagamento = document.getElementById("pagamento").value;
      if (!nome || !endereco || !pagamento) {
        alert("Por favor, preencha todos os campos do formul√°rio.");
        return;
      }

      let mensagem = `*Pedido do Supermercado Delivery*\n\n*Cliente:* ${nome}\n\n`;

      carrinho.forEach(item => {
        mensagem += `üõí ${item.quantidade}x ${item.nome} - R$ ${(item.preco * item.quantidade).toFixed(2)}\n`;
      });

      const total = carrinho.reduce((acc, item) => acc + item.preco * item.quantidade, 0);
      mensagem += `\n*Total:* R$ ${total.toFixed(2)}\n`;
      mensagem += `üìç Endere√ßo: ${endereco}\n`;
      mensagem += `üí≥ Forma de pagamento: ${pagamento.charAt(0).toUpperCase() + pagamento.slice(1)}\n`;

      if (pagamento === "dinheiro") {
        const troco = document.getElementById("troco").value;
        if (troco && parseFloat(troco) > 0) {
          mensagem += `ü™ô Troco para: R$ ${parseFloat(troco).toFixed(2)}\n`;
        }
      }

      // N√∫mero do WhatsApp - substituir pelo seu n√∫mero (com c√≥digo do pa√≠s, sem sinais)
      const numeroWhats = "5584996220061";

      const url = `https://wa.me/${numeroWhats}?text=${encodeURIComponent(mensagem)}`;
      window.open(url, "_blank");
    }

    // Mostrar/Ocultar carrinho pelo bot√£o no header
    document.getElementById("botao-carrinho").onclick = () => {
      const carrinhoContainer = document.getElementById("carrinho-container");
      if (carrinhoContainer.style.display === "flex") {
        carrinhoContainer.style.display = "none";
      } else {
        carrinhoContainer.style.display = "flex";
      }
    };

    // Busca em tempo real
    document.getElementById("busca").addEventListener("input", () => {
      // Mant√©m a categoria selecionada
      const categoriaAtivaBtn = document.querySelector("#categorias button.active");
      const categoriaAtiva = categoriaAtivaBtn ? categoriaAtivaBtn.textContent : null;
      renderizarProdutos(categoriaAtiva === "Todos" ? null : categoriaAtiva);
    });

    // Inicializa√ß√£o
    renderizarCategorias();
    renderizarProdutos();
    renderizarCarrinho();
    atualizarBadge();
  </script>
</body>
</html>
