<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Supermercado Delivery</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    .product {
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 10px;
    }
    .cart, .checkout {
      margin-top: 30px;
    }
    input, select, button {
      padding: 10px;
      width: 100%;
      margin-top: 10px;
      box-sizing: border-box;
    }
    button {
      background-color: green;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: darkgreen;
    }
    #troco-container {
      display: none;
    }
    .remover-btn {
      background-color: red;
      color: white;
      padding: 5px 10px;
      margin-left: 10px;
      font-size: 12px;
    }
    .remover-btn:hover {
      background-color: darkred;
    }
    .clear-cart {
      background-color: #555;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <h1>Supermercado Delivery</h1>

  <div id="product-list"></div>

  <div class="cart">
    <h2>Carrinho</h2>
    <ul id="cart-items"></ul>
    <p><strong>Total: R$ <span id="total">0.00</span></strong></p>
    <button class="clear-cart" onclick="limparCarrinho()">Remover tudo do carrinho</button>
  </div>

  <div class="checkout">
    <h3>Endere√ßo de entrega</h3>
    <input type="text" id="endereco" placeholder="Digite seu endere√ßo completo" />

    <h3>Forma de pagamento</h3>
    <select id="forma-pagamento" onchange="verificarPagamento()">
      <option value="Pix">Pix</option>
      <option value="Cart√£o">Cart√£o</option>
      <option value="Dinheiro">Dinheiro</option>
    </select>

    <div id="troco-container">
      <h4>Troco para quanto?</h4>
      <input type="text" id="troco" placeholder="Ex: 100.00" />
    </div>

    <br>
    <button onclick="finalizarPedido()">Finalizar Pedido no WhatsApp</button>
  </div>

  <script>
    const produtos = [
      { nome: "Arroz 5kg", preco: 25 },
      { nome: "Feij√£o 1kg", preco: 7 },
      { nome: "√ìleo", preco: 6 },
      { nome: "Macarr√£o", preco: 5 },
      { nome: "Detergente", preco: 3 }
    ];

    const carrinho = [];

    const listaProdutos = document.getElementById("product-list");
    const listaCarrinho = document.getElementById("cart-items");
    const totalSpan = document.getElementById("total");

    produtos.forEach((produto, index) => {
      const div = document.createElement("div");
      div.className = "product";
      div.innerHTML = `
        <h3>${produto.nome}</h3>
        <p>Pre√ßo: R$ ${produto.preco.toFixed(2)}</p>
        <input type="number" id="qtd-${index}" value="1" min="1" />
        <button onclick="adicionarAoCarrinho(${index})">Adicionar ao carrinho</button>
      `;
      listaProdutos.appendChild(div);
    });

    function adicionarAoCarrinho(index) {
      const qtd = parseInt(document.getElementById(`qtd-${index}`).value);
      if (qtd < 1) return;
      const produto = produtos[index];
      carrinho.push({ ...produto, quantidade: qtd });
      atualizarCarrinho();
    }

    function atualizarCarrinho() {
      listaCarrinho.innerHTML = "";
      let total = 0;

      carrinho.forEach((item, index) => {
        const li = document.createElement("li");
        li.innerHTML = `
          ${item.quantidade}x ${item.nome} - R$ ${(item.preco * item.quantidade).toFixed(2)}
          <button class="remover-btn" onclick="removerDoCarrinho(${index})">Remover</button>
        `;
        listaCarrinho.appendChild(li);
        total += item.preco * item.quantidade;
      });

      totalSpan.textContent = total.toFixed(2);
    }

    function removerDoCarrinho(index) {
      carrinho.splice(index, 1);
      atualizarCarrinho();
    }

    function limparCarrinho() {
      carrinho.length = 0;
      atualizarCarrinho();
    }

    function verificarPagamento() {
      const forma = document.getElementById("forma-pagamento").value;
      const trocoDiv = document.getElementById("troco-container");

      if (forma === "Dinheiro") {
        trocoDiv.style.display = "block";
      } else {
        trocoDiv.style.display = "none";
      }
    }

    function finalizarPedido() {
      const endereco = document.getElementById("endereco").value.trim();
      const formaPagamento = document.getElementById("forma-pagamento").value;
      const troco = document.getElementById("troco").value.trim();

      if (!endereco) {
        alert("Por favor, informe o endere√ßo.");
        return;
      }

      if (carrinho.length === 0) {
        alert("O carrinho est√° vazio.");
        return;
      }

      let mensagem = "*Novo pedido de supermercado:*\n\n";

      carrinho.forEach(item => {
        mensagem += `üõí ${item.quantidade}x ${item.nome} - R$ ${(item.preco * item.quantidade).toFixed(2)}\n`;
      });

      const total = carrinho.reduce((soma, item) => soma + item.preco * item.quantidade, 0);

      mensagem += `\n*Total:* R$ ${total.toFixed(2)}\n`;
      mensagem += `üìç *Endere√ßo:* ${endereco}\n`;
      mensagem += `üí≥ *Forma de pagamento:* ${formaPagamento}\n`;

      if (formaPagamento === "Dinheiro" && troco) {
        mensagem += `ü™ô *Troco para:* R$ ${troco}`;
      }

      const numero = "5584996220061"; // Ex: 5581999999999
      const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;
      window.open(url, '_blank');
    }
  </script>

</body>
</html>
