<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Delivery Supermercado</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f7f7;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #4CAF50;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    .categorias, .produtos, .carrinho, .formulario {
      max-width: 900px;
      margin: 1rem auto;
      padding: 1rem;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .produtos-container, .carrinho-itens {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
    }
    .produto, .item-carrinho {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 0.5rem;
      text-align: center;
      background-color: #fafafa;
    }
    .produto img {
      width: 100%;
      max-height: 100px;
      object-fit: contain;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 0.5rem;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    input, select {
      width: 100%;
      padding: 0.5rem;
      margin: 0.5rem 0;
    }
    .item-carrinho span {
      display: block;
    }
  </style>
</head>
<body>
  <header>
    <h1>Supermercado Delivery</h1>
  </header>

  <div class="categorias">
    <label for="categoria">Filtrar por categoria:</label>
    <select id="categoria"></select>
    <input type="text" id="busca" placeholder="Buscar produto...">
  </div>

  <div class="produtos">
    <h2>Produtos</h2>
    <div class="produtos-container" id="produtos"></div>
  </div>

  <div class="carrinho">
    <h2>Carrinho</h2>
    <div class="carrinho-itens" id="carrinho"></div>
    <p>Total: <span id="total">R$ 0,00</span></p>
  </div>

  <div class="formulario">
    <h2>Finalizar Pedido</h2>
    <input type="text" id="nome" placeholder="Seu nome" required>
    <input type="text" id="endereco" placeholder="Endere√ßo completo" required>
    <select id="pagamento" onchange="mostrarTroco()">
      <option value="pix">PIX</option>
      <option value="credito">Cart√£o de Cr√©dito</option>
      <option value="debito">Cart√£o de D√©bito</option>
      <option value="dinheiro">Dinheiro</option>
    </select>
    <div id="troco-container" style="display:none">
      <input type="number" id="troco" placeholder="Troco para quanto?">
    </div>
    <button onclick="enviarWhatsApp()">Enviar Pedido no WhatsApp</button>
  </div>

  <script>
    const produtos = [
      { id: 1, nome: 'Arroz', preco: 5.99, categoria: 'alimentos', imagem: 'https://via.placeholder.com/100' },
      { id: 2, nome: 'Feij√£o', preco: 4.99, categoria: 'alimentos', imagem: 'https://via.placeholder.com/100' },
      { id: 3, nome: 'Detergente', preco: 2.50, categoria: 'limpeza', imagem: 'https://via.placeholder.com/100' },
      { id: 4, nome: 'Sab√£o em p√≥', preco: 8.00, categoria: 'limpeza', imagem: 'https://via.placeholder.com/100' },
      { id: 5, nome: 'Refrigerante', preco: 6.00, categoria: 'bebidas', imagem: 'https://via.placeholder.com/100' }
    ];

    const categoriaSelect = document.getElementById('categoria');
    const produtosContainer = document.getElementById('produtos');
    const itensCarrinhoContainer = document.getElementById('carrinho');
    const totalSpan = document.getElementById('total');
    const pagamentoSelect = document.getElementById('pagamento');
    const trocoContainer = document.getElementById('troco-container');
    const buscaInput = document.getElementById('busca');

    const carrinho = {};

    function mostrarCategorias() {
      const categorias = [...new Set(produtos.map(p => p.categoria))];
      categoriaSelect.innerHTML = '<option value="todos">Todos</option>' +
        categorias.map(cat => `<option value="${cat}">${cat}</option>`).join('');
    }

    function mostrarProdutos(lista) {
      produtosContainer.innerHTML = lista.map(p => `
        <div class="produto">
          <img src="${p.imagem}" alt="${p.nome}">
          <h3>${p.nome}</h3>
          <p>R$ ${p.preco.toFixed(2)}</p>
          <button onclick="adicionarCarrinho(${p.id})">Adicionar</button>
        </div>
      `).join('');
    }

    function adicionarCarrinho(id) {
      carrinho[id] = (carrinho[id] || 0) + 1;
      atualizarCarrinho();
    }

    function atualizarCarrinho() {
      let total = 0;
      itensCarrinhoContainer.innerHTML = Object.keys(carrinho).map(id => {
        const produto = produtos.find(p => p.id == id);
        const qtd = carrinho[id];
        const subtotal = produto.preco * qtd;
        total += subtotal;
        return `
          <div class="item-carrinho">
            <span><strong>${produto.nome}</strong></span>
            <span>Quantidade: ${qtd}</span>
            <span>Subtotal: R$ ${subtotal.toFixed(2)}</span>
            <button class="aumentar" data-id="${id}" aria-label="Aumentar quantidade">+</button>
            <button class="diminuir" data-id="${id}" aria-label="Diminuir quantidade">-</button>
            <button class="item-remover" data-id="${id}" aria-label="Remover item">Remover</button>
          </div>
        `;
      }).join('');
      totalSpan.textContent = `R$ ${total.toFixed(2)}`;
    }

    itensCarrinhoContainer.addEventListener('click', (e) => {
      const id = e.target.dataset.id;
      if (!id) return;

      if (e.target.classList.contains('aumentar')) {
        carrinho[id]++;
      } else if (e.target.classList.contains('diminuir')) {
        carrinho[id]--;
        if (carrinho[id] <= 0) delete carrinho[id];
      } else if (e.target.classList.contains('item-remover')) {
        delete carrinho[id];
      }
      atualizarCarrinho();
    });

    function mostrarTroco() {
      const forma = pagamentoSelect.value;
      trocoContainer.style.display = forma === 'dinheiro' ? 'block' : 'none';
    }

    function enviarWhatsApp() {
      const nome = document.getElementById('nome').value.trim();
      const endereco = document.getElementById('endereco').value.trim();
      const pagamento = pagamentoSelect.value;
      const troco = document.getElementById('troco').value;

      if (!nome || !endereco || !pagamento) {
        alert('Por favor, preencha todos os campos obrigat√≥rios.');
        return;
      }

      let mensagem = `üì¶ *Novo Pedido Supermercado Delivery*%0A`;
      mensagem += `üë§ Nome: ${nome}%0A`;
      mensagem += `üè† Endere√ßo: ${endereco}%0A`;
      mensagem += `üí≥ Pagamento: ${pagamento}%0A`;
      if (pagamento === 'dinheiro' && troco) {
        mensagem += `üí∞ Troco para: R$ ${parseFloat(troco).toFixed(2)}%0A`;
      }
      mensagem += `%0Aüõí *Itens do pedido:*%0A`;

      let total = 0;
      Object.keys(carrinho).forEach(id => {
        const produto = produtos.find(p => p.id == id);
        const qtd = carrinho[id];
        const subtotal = produto.preco * qtd;
        total += subtotal;
        mensagem += `‚Ä¢ ${produto.nome} (x${qtd}) - R$ ${subtotal.toFixed(2)}%0A`;
      });

      mensagem += `%0Aüíµ *Total: R$ ${total.toFixed(2)}*`;

      const numeroLoja = '5584996220061'; // Substitua pelo n√∫mero da loja
      const url = `https://wa.me/${numeroLoja}?text=${mensagem}`;
      window.open(url, '_blank');
    }

    categoriaSelect.addEventListener('change', () => {
      const cat = categoriaSelect.value;
      const filtrados = cat === 'todos' ? produtos : produtos.filter(p => p.categoria === cat);
      mostrarProdutos(filtrados);
    });

    buscaInput.addEventListener('input', () => {
      const termo = buscaInput.value.toLowerCase();
      const filtrados = produtos.filter(p => p.nome.toLowerCase().includes(termo));
      mostrarProdutos(filtrados);
    });

    mostrarCategorias();
    mostrarProdutos(produtos);
  </script>
</body>
</html>
