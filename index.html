<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Supermercado Delivery</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #f8f8f8;
    }
    header {
      background-color: #4caf50;
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #categorias {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      padding: 10px;
      background: #fff;
      overflow-x: auto;
    }
    #categorias button {
      background-color: #ddd;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    #categorias button.active {
      background-color: #4caf50;
      color: white;
    }
    #produtos {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
      padding: 20px;
    }
    .card {
      background: white;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .card img {
      max-width: 100px;
      height: auto;
      margin-bottom: 10px;
    }
    .card button {
      margin-top: 5px;
      background-color: #4caf50;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    #carrinho-container {
      position: fixed;
      top: 60px;
      right: 20px;
      width: 350px;
      max-height: 80vh;
      overflow-y: auto;
      background-color: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 10px;
      z-index: 999;
      display: none;
    }
    @media (max-width: 600px) {
      #carrinho-container {
        right: 10px;
        left: 10px;
        width: auto;
        top: 70px;
        max-height: 75vh;
      }
    }
    .badge {
      background-color: red;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 12px;
      position: absolute;
      top: 5px;
      right: 5px;
    }
    .cart-icon {
      position: relative;
      font-size: 24px;
      cursor: pointer;
    }
    #form-pagamento {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <header>
    <h2>Mercado Delivery</h2>
    <div class="cart-icon" id="botao-carrinho">
      <i class="fas fa-shopping-cart"></i>
      <span class="badge" id="badge-carrinho">0</span>
    </div>
  </header>

  <div id="categorias"></div>
  <div style="padding: 10px;">
    <input type="text" id="busca" placeholder="Buscar produto..." style="width: 100%; padding: 8px;" />
  </div>
  <div id="produtos"></div>

  <div id="carrinho-container">
    <h3>üõí Carrinho</h3>
    <div id="carrinho"></div>
    <p><strong>Total:</strong> R$ <span id="total"></span></p>
    <div id="form-pagamento">
      <label>üìç Endere√ßo de entrega:</label><br />
      <input type="text" id="endereco" placeholder="Digite seu endere√ßo" style="width: 100%; padding: 5px;" /><br /><br />

      <label>üí≥ Forma de pagamento:</label><br />
      <select id="pagamento" style="width: 100%; padding: 5px;">
        <option value="PIX">PIX</option>
        <option value="Cart√£o">Cart√£o</option>
        <option value="Dinheiro">Dinheiro</option>
      </select><br /><br />

      <div id="troco-container" style="display: none;">
        <label>ü™ô Troco para:</label>
        <input type="text" id="troco" placeholder="Ex: R$ 20" style="width: 100%; padding: 5px;" />
      </div>
    </div>
    <br />
    <button onclick="enviarWhatsapp()" style="background-color: #25d366; color: white; padding: 10px; width: 100%; border: none; border-radius: 5px; cursor: pointer;">
      <i class="fab fa-whatsapp"></i> Enviar pedido via WhatsApp
    </button>
  </div>

  <script>
    const produtos = [
      { nome: "Macarr√£o", preco: 5, categoria: "Massas", imagem: "https://via.placeholder.com/100" },
      { nome: "Arroz", preco: 10, categoria: "Gr√£os", imagem: "https://via.placeholder.com/100" },
      { nome: "Feij√£o", preco: 8, categoria: "Gr√£os", imagem: "https://via.placeholder.com/100" },
      { nome: "Molho de Tomate", preco: 4, categoria: "Massas", imagem: "https://via.placeholder.com/100" },
      { nome: "Refrigerante", preco: 6, categoria: "Bebidas", imagem: "https://via.placeholder.com/100" }
    ];
    let carrinho = [];

    function renderizarCategorias() {
      const categorias = ["Todos", ...new Set(produtos.map(p => p.categoria))];
      const container = document.getElementById("categorias");
      container.innerHTML = "";
      categorias.forEach(cat => {
        const btn = document.createElement("button");
        btn.textContent = cat;
        btn.onclick = () => renderizarProdutos(cat === "Todos" ? null : cat);
        container.appendChild(btn);
      });
    }

    function renderizarProdutos(filtro = null) {
      const busca = document.getElementById("busca").value.toLowerCase();
      const container = document.getElementById("produtos");
      container.innerHTML = "";
      produtos.filter(p => (!filtro || p.categoria === filtro) && p.nome.toLowerCase().includes(busca))
        .forEach(produto => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <img src="${produto.imagem}" alt="${produto.nome}" />
            <strong>${produto.nome}</strong>
            <p>R$ ${produto.preco.toFixed(2)}</p>
            <button onclick='adicionarCarrinho("${produto.nome}", ${produto.preco})'>Adicionar</button>
          `;
          container.appendChild(card);
        });
    }

    function adicionarCarrinho(nome, preco) {
      const item = carrinho.find(p => p.nome === nome);
      if (item) {
        item.qtd++;
      } else {
        carrinho.push({ nome, preco, qtd: 1 });
      }
      renderizarCarrinho();
      atualizarBadge();
    }

    function removerItem(index) {
      carrinho.splice(index, 1);
      renderizarCarrinho();
      atualizarBadge();
    }

    function alterarQtd(index, delta) {
      carrinho[index].qtd += delta;
      if (carrinho[index].qtd <= 0) removerItem(index);
      renderizarCarrinho();
      atualizarBadge();
    }

    function renderizarCarrinho() {
      const container = document.getElementById("carrinho");
      container.innerHTML = "";
      let total = 0;
      carrinho.forEach((item, i) => {
        total += item.preco * item.qtd;
        container.innerHTML += `
          <div>
            üõí ${item.qtd}x ${item.nome} - R$ ${(item.preco * item.qtd).toFixed(2)}
            <button onclick="alterarQtd(${i}, 1)">+</button>
            <button onclick="alterarQtd(${i}, -1)">-</button>
            <button onclick="removerItem(${i})">Remover</button>
          </div>
        `;
      });
      document.getElementById("total").textContent = total.toFixed(2);
    }

    function atualizarBadge() {
      document.getElementById("badge-carrinho").textContent = carrinho.length;
    }

    document.getElementById("pagamento").addEventListener("change", () => {
      document.getElementById("troco-container").style.display =
        document.getElementById("pagamento").value === "Dinheiro" ? "block" : "none";
    });

    function enviarWhatsapp() {
      const endereco = document.getElementById("endereco").value;
      const pagamento = document.getElementById("pagamento").value;
      const troco = document.getElementById("troco").value;
      let mensagem = "";
      let total = 0;
      carrinho.forEach(item => {
        mensagem += `üõí ${item.qtd}x ${item.nome} - R$ ${(item.preco * item.qtd).toFixed(2)}\n`;
        total += item.preco * item.qtd;
      });
      mensagem += `\nTotal: R$ ${total.toFixed(2)}\n`;
      mensagem += `üìç Endere√ßo: ${endereco}\n`;
      mensagem += `üí≥ Forma de pagamento: ${pagamento}\n`;
      if (pagamento === "Dinheiro") {
        mensagem += `ü™ô Troco para: ${troco}`;
      }
      const numeroWhats = "5511999999999";
      const url = `https://wa.me/${numeroWhats}?text=${encodeURIComponent(mensagem)}`;
      window.open(url, "_blank");
    }

    document.getElementById("botao-carrinho").onclick = () => {
      const carrinhoContainer = document.getElementById("carrinho-container");
      carrinhoContainer.style.display =
        carrinhoContainer.style.display === "flex" || carrinhoContainer.style.display === "block"
          ? "none" : "flex";
    };

    document.getElementById("busca").addEventListener("input", () => {
      const categoriaAtivaBtn = document.querySelector("#categorias button.active");
      const categoriaAtiva = categoriaAtivaBtn ? categoriaAtivaBtn.textContent : null;
      renderizarProdutos(categoriaAtiva === "Todos" ? null : categoriaAtiva);
    });

    renderizarCategorias();
    renderizarProdutos();
    renderizarCarrinho();
    atualizarBadge();
  </script>
</body>
</html>
